<!DOCTYPE html>
<html lang="en-us">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='JavaIO流的基本概念与节点流'><title>Java_IO流</title>

<link rel='canonical' href='https://minster77.github.io/p/java_io%E6%B5%81/'>

<link rel="stylesheet" href="/scss/style.min.css"><meta property='og:title' content='Java_IO流'>
<meta property='og:description' content='JavaIO流的基本概念与节点流'>
<meta property='og:url' content='https://minster77.github.io/p/java_io%E6%B5%81/'>
<meta property='og:site_name' content='MinsterBlog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Java' /><meta property='article:published_time' content='2021-05-29T16:22:25&#43;08:00'/><meta property='article:modified_time' content='2021-05-29T16:22:25&#43;08:00'/>
<meta name="twitter:title" content="Java_IO流">
<meta name="twitter:description" content="JavaIO流的基本概念与节点流">
    <link rel="shortcut icon" href="image/icons/M.ico" />

    </head>
    <body class="
    article-page has-toc
">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex 
    
        extended
    
">
    
        <div id="article-toolbar">
            <a href="https://minster77.github.io/" class="back-home">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



                <span>Back</span>
            </a>
        </div>
    
<main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/javabase/" >
                JavaBase
            </a>
        
    </header>
    

    <h2 class="article-title">
        <a href="/p/java_io%E6%B5%81/">Java_IO流</a>
    </h2>

    
    <h3 class="article-subtitle">
        JavaIO流的基本概念与节点流
    </h3>
    <footer class="article-time">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <time class="article-time--published">May 29, 2021</time>
    </footer></div>
</header>

    <section class="article-content">
    <h2 id="java-io流1概念及节点流">Java IO流1（概念及节点流）</h2>
<hr>
<ol>
<li>文件</li>
<li>IO流原理及流的分类</li>
<li>InputStream的子类及使用</li>
<li>OutputStream的子类及使用</li>
<li>利用FileInputStream及FileOutputStream进行文件copy</li>
<li>Reader与Writer的子类及使用</li>
<li>节点流和处理流</li>
</ol>
<hr>
<h3 id="文件">文件</h3>
<ul>
<li>
<p>文件是保存数据的地方，例如word文档，txt文档等都是文件。</p>
</li>
<li>
<p>文件流</p>
<p>文件在程序中是以流的形式来操作的</p>
<p><img src="/image/Java_IO_01/image01.jpg" alt="image01"  /></p>
<ul>
<li>流：数据在数据源(文件）和程序（内存）之间经历的路径</li>
<li>输入流：数据从数据源（文件）到程序（内存）的路径</li>
<li>输出流：数据从程序（内存）到数据源（文件）的路径</li>
</ul>
</li>
<li>
<p>常用的文件操作</p>
</li>
</ul>
<ol>
<li>
<p>使用new File（String pathname）创建</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.java_io</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileCreate1</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>
    <span class="c1">//方法1：使用new File(filePath)创建文件
</span><span class="c1"></span>    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createFile01</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
         <span class="c1">//创建的文件路径名称
</span><span class="c1"></span>        <span class="n">String</span> <span class="n">filePath</span> <span class="o">=</span> <span class="s">&#34;e:\\news1.txt&#34;</span><span class="o">;</span>
        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">filePath</span><span class="o">);</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="n">file</span><span class="o">.</span><span class="na">createNewFile</span><span class="o">();</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;文件创建成功&#34;</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></li>
<li>
<p>使用new File(File  parent,String child)创建</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"> <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createFile02</span><span class="o">(){</span>
        <span class="n">File</span> <span class="n">parentFile</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;e:\\&#34;</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">fileName</span> <span class="o">=</span> <span class="s">&#34;news2.txt&#34;</span><span class="o">;</span>
        <span class="c1">//此时的file对象在Java程序(内存)中只是一个对象而已
</span><span class="c1"></span>        <span class="c1">//只有执行了createNewFile方法才会真正在磁盘创建文件
</span><span class="c1"></span>        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">parentFile</span><span class="o">,</span><span class="n">fileName</span><span class="o">);</span>


        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//此时在磁盘中创建了文件
</span><span class="c1"></span>            <span class="n">file</span><span class="o">.</span><span class="na">createNewFile</span><span class="o">();</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;文件创建成功&#34;</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

    <span class="o">}</span>
</code></pre></div></li>
<li>
<p>使用new File(String parent,String child)创建</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createFile03</span><span class="o">(){</span>
        <span class="n">String</span> <span class="n">parentPath</span> <span class="o">=</span> <span class="s">&#34;e:\\&#34;</span><span class="o">;</span>
        <span class="c1">//String parentPath = &#34;e:/&#34;; 也可以
</span><span class="c1"></span>        <span class="n">String</span> <span class="n">fileName</span> <span class="o">=</span> <span class="s">&#34;new3.txt&#34;</span><span class="o">;</span>
        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">parentPath</span><span class="o">,</span><span class="n">fileName</span><span class="o">);</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="n">file</span><span class="o">.</span><span class="na">createNewFile</span><span class="o">();</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;文件创建成功&#34;</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div><p><img src="/image/Java_IO_01/image02.png" alt="image02"  /></p>
</li>
<li>
<p>获取文件信息</p>
<ul>
<li>getName()：获取文件名字</li>
<li>getAbsolutePath()：获取文件绝对路径</li>
<li>getParent()：获取父级目录</li>
<li>length()：获取文件大小(字节)</li>
<li>exists()：查看文件是否存在</li>
<li>isFile()：检测是不是一个文件</li>
<li>isDirectory()：检测是不是一个目录</li>
</ul>
<p>代码演示</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.java_io</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">fileInformation</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fileInformation</span><span class="o">(){</span>
        <span class="c1">//先创建文件对象
</span><span class="c1"></span>        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;e:\\news1.txt&#34;</span><span class="o">);</span>
        <span class="c1">//调用对应的方法，得到相应的信息
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;文件名字=&#34;</span><span class="o">+</span><span class="n">file</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;文件绝对路径=&#34;</span><span class="o">+</span><span class="n">file</span><span class="o">.</span><span class="na">getAbsolutePath</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;文件父级目录=&#34;</span><span class="o">+</span><span class="n">file</span><span class="o">.</span><span class="na">getParent</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;文件大小（字节）=&#34;</span><span class="o">+</span><span class="n">file</span><span class="o">.</span><span class="na">length</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;文件是否存在=&#34;</span><span class="o">+</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;是不是一个文件=&#34;</span><span class="o">+</span><span class="n">file</span><span class="o">.</span><span class="na">isFile</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;是不是一个目录=&#34;</span><span class="o">+</span><span class="n">file</span><span class="o">.</span><span class="na">isDirectory</span><span class="o">());</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p><img src="/image/Java_IO_01/image03.png" alt="image03"  /></p>
</li>
<li>
<p>目录的操作</p>
<ul>
<li>delete()：删除目录。</li>
<li>mkdir()：创建一级目录</li>
<li>mkdirs()：创建多级目录</li>
</ul>
<p>代码示例</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">    <span class="c1">//检查目录下是否存在news2.txt文件，若存在则删除
</span><span class="c1"></span>    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">m1</span><span class="o">(){</span>
        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;e:\\news2.txt&#34;</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">delete</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;删除成功&#34;</span><span class="o">);</span>
            <span class="o">}</span><span class="k">else</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;删除失败&#34;</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span><span class="k">else</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;找不到改文件...&#34;</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>创建目录</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">	<span class="c1">//检查e:\\demo\\a\\b\\c是否存在，若不存在则创建
</span><span class="c1"></span>    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">m2</span><span class="o">(){</span>
        <span class="n">String</span> <span class="n">directoryPath</span> <span class="o">=</span> <span class="s">&#34;e:\\demo\\a\\b\\c&#34;</span><span class="o">;</span>
        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">directoryPath</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;改目录存在...&#34;</span><span class="o">);</span>
        <span class="o">}</span><span class="k">else</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">mkdirs</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">directoryPath</span><span class="o">+</span><span class="s">&#34;目录创建成功&#34;</span><span class="o">);</span>
            <span class="o">}</span><span class="k">else</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">directoryPath</span><span class="o">+</span><span class="s">&#34;目录创建失败&#34;</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>

    <span class="o">}</span>
</code></pre></div><p><img src="/image/Java_IO_01/image04.png" alt="image04"  /></p>
</li>
</ol>
<h3 id="io流原理及流的分类">IO流原理及流的分类</h3>
<ul>
<li>
<p>输入input：读取外部数据（磁盘、光盘等存储设备的数据）到程序（内存）中</p>
</li>
<li>
<p>输出output：将程序（内存）数据输出到磁盘、光盘等存储设备中</p>
</li>
<li>
<p>流的分类</p>
<ul>
<li>按操作数据单位不同分为：
<ul>
<li>字节流（8bit）：二进制文件使用</li>
<li>字符流（按字符）：文本文件使用</li>
</ul>
</li>
<li>按数据流的流向不同分为：输入流，输出流</li>
<li>按流的角色的不同分为：字节流，处理流/包装流</li>
</ul>
<p>而Java IO流有四个抽象基类</p>
<table>
<thead>
<tr>
<th></th>
<th>字节流</th>
<th>字符流</th>
</tr>
</thead>
<tbody>
<tr>
<td>输出流</td>
<td>OutputStream</td>
<td>Writer</td>
</tr>
<tr>
<td>输入流</td>
<td>InputStream</td>
<td>Reader</td>
</tr>
</tbody>
</table>
<p>其他的流都是继承于这四大基类的。下图是Java IO流的整体架构图</p>
<p><img src="/image/Java_IO_01/image05.jpg" alt="image05"  /></p>
<p>所理解的流就像快递小哥，在物流中心和客户之间做传递作用</p>
<p><img src="/image/Java_IO_01/image06.png" alt="image06"  /></p>
</li>
</ul>
<h3 id="inputstream的子类及使用">InputStream的子类及使用</h3>
<ul>
<li>
<p>InputStream的常用子类</p>
<ol>
<li>FileInputStream：文件输入流</li>
<li>BufferedInputStream：缓冲字节输入流</li>
<li>ObjectInoutStream：对象字节输入流</li>
</ol>
<ul>
<li>
<p>使用FileInputStream读取文件</p>
<p>read()读取单个字节</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.java_io</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.FileInputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileInputStreamTest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">InputStream</span><span class="o">(){</span>
        <span class="n">String</span>  <span class="n">filePath</span> <span class="o">=</span> <span class="s">&#34;e:\\hello.txt&#34;</span><span class="o">;</span>
        <span class="n">FileInputStream</span> <span class="n">fileInputStream</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">readFile</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//创建FileInputStream对象，用于读取文件
</span><span class="c1"></span>            <span class="n">fileInputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">filePath</span><span class="o">);</span>
            <span class="c1">//read()：从输入流中读取一个字节的数据，如果没有输入，则被阻止
</span><span class="c1"></span>            <span class="c1">//如果返回-1.则表示读取完毕
</span><span class="c1"></span>            <span class="k">while</span> <span class="o">((</span><span class="n">readFile</span> <span class="o">=</span> <span class="n">fileInputStream</span><span class="o">.</span><span class="na">read</span><span class="o">())!=-</span><span class="n">1</span><span class="o">){</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">((</span><span class="kt">char</span><span class="o">)</span> <span class="n">readFile</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span><span class="k">finally</span> <span class="o">{</span>
            <span class="c1">//关闭文件流，释放资源
</span><span class="c1"></span>            <span class="k">try</span> <span class="o">{</span>
                <span class="n">fileInputStream</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>

        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p><img src="/image/Java_IO_01/image07.png" alt="image07"  /></p>
<p>read(byte[b])缓冲区读取b个字节</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">	<span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">InputStream02</span><span class="o">(){</span>
        <span class="n">String</span> <span class="n">filePath</span> <span class="o">=</span> <span class="s">&#34;e:\\hello.txt&#34;</span><span class="o">;</span>
        <span class="kt">byte</span> <span class="o">[]</span> <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">8</span><span class="o">];</span><span class="c1">//每次读取8个字节的数据
</span><span class="c1"></span>        <span class="n">FileInputStream</span> <span class="n">fileInputStream</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">readLen</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span><span class="c1">//记录读取的字节数
</span><span class="c1"></span>        <span class="k">try</span> <span class="o">{</span>
            <span class="n">fileInputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">filePath</span><span class="o">);</span>
            <span class="cm">/*
</span><span class="cm">            * 创建FileInputStream对象，用于读取文件
</span><span class="cm">            * 从输入流读取最多buf.length字节数据到字节数组，若没有输入，则阻塞此方法
</span><span class="cm">            * 如果返回值为-1，表示读取完毕
</span><span class="cm">            * 如果读取正常则返回读取的字节数*/</span>
            <span class="k">while</span><span class="o">((</span><span class="n">readLen</span> <span class="o">=</span> <span class="n">fileInputStream</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buf</span><span class="o">))!=-</span><span class="n">1</span><span class="o">){</span>
                <span class="c1">//new Sting(buf,0,len):把一个字节数组从0取到len构造成一个新的String
</span><span class="c1"></span>                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">buf</span><span class="o">,</span><span class="n">0</span><span class="o">,</span><span class="n">readLen</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="c1">//关闭流，释放资源
</span><span class="c1"></span>                <span class="n">fileInputStream</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div><p><img src="/image/Java_IO_01/image09.png" alt="image09"  /></p>
<p>需要注意的是使用FileInputStream读取文件时，读取到的字符是乱码的</p>
<p><img src="/image/Java_IO_01/image08.png" alt="image08"  /></p>
</li>
</ul>
</li>
</ul>
<h3 id="outputstream的子类及使用">OutputStream的子类及使用</h3>
<ul>
<li>
<p>FileOutputStream</p>
<p>演示使用FileOutputStream。将数据写到文件中，如果该文件不存在，则创建该文件。</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.java_io</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.FileNotFoundException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.FileOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileOutputStreamTest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fileOutputStream</span><span class="o">(){</span>
        <span class="n">String</span> <span class="n">filePath</span> <span class="o">=</span> <span class="s">&#34;e:\\hello.txt&#34;</span><span class="o">;</span>
        <span class="n">FileOutputStream</span> <span class="n">fileOutputStream</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//创建FileOutputStream对象，对文件操作
</span><span class="c1"></span>            <span class="n">fileOutputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">filePath</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
            <span class="c1">//向文件写入一个字节的数据
</span><span class="c1"></span>            <span class="n">fileOutputStream</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="sc">&#39;H&#39;</span><span class="o">);</span>
            <span class="c1">//向文件写入字符串
</span><span class="c1"></span>            <span class="c1">//str.getBytes()将字符串转换为字节数组
</span><span class="c1"></span>            <span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&#34;Hello,Word!&#34;</span><span class="o">;</span>
            <span class="n">fileOutputStream</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">str</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;写入成功&#34;</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">fileOutputStream</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p><img src="/image/Java_IO_01/image10.png" alt="image10"  /></p>
<ul>
<li>
<p>若需要写入指定的字符，使用</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//write(byte[] b,int off,int len);
</span><span class="c1"></span><span class="n">fileOutputStream</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">str</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(),</span><span class="n">0</span><span class="o">,</span><span class="n">str</span><span class="o">.</span><span class="na">length</span><span class="o">());</span>
</code></pre></div><p>可以将len字节从偏移量off的指定字节数组写入此文件输入流</p>
</li>
<li>
<p>需要注意的是，如果使用</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="n">fileOutputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">,</span><span class="kt">boolean</span> <span class="n">append</span><span class="o">);</span>
</code></pre></div><p>时没有将append设置为true的话，系统会默认append的值为false，则会清空记事本再写入新的内容（覆盖之前的内容）。</p>
<p>若需要换行或者添加制表符输入，使用其转义字符即刻</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="n">fileOutputStream</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;\n&#34;</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span><span class="c1">//换行
</span><span class="c1"></span><span class="n">fileOutputStream</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;\t&#34;</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span><span class="c1">//增加制表符
</span></code></pre></div></li>
</ul>
</li>
</ul>
<h3 id="利用fileinputstream及fileoutputstream进行文件copy">利用FileInputStream及FileOutputStream进行文件Copy</h3>
<ul>
<li>
<p>思路分析</p>
<ol>
<li>创建文件的输入流，将文件读到程序中</li>
<li>创建文件的输出流，将读取到的文件输入写到指定的文件中</li>
</ol>
</li>
<li>
<p>代码演示</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.java_io</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.FileInputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.FileOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileCopy</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>
    <span class="cm">/*
</span><span class="cm">    * 将&#34;e:\\567.jpg&#34;复制到&#34;d:\\567.jpg&#34;*/</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fileCopy</span><span class="o">(){</span>
        <span class="n">String</span> <span class="n">srcPath</span> <span class="o">=</span> <span class="s">&#34;e:\\567.jpg&#34;</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">destPath</span> <span class="o">=</span> <span class="s">&#34;d:\\567.jpg&#34;</span><span class="o">;</span>
        <span class="c1">//创建输入流及输出流对象
</span><span class="c1"></span>        <span class="n">FileInputStream</span> <span class="n">fileInputStream</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="n">FileOutputStream</span> <span class="n">fileOutputStream</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//定义字节数组接收，提高效率
</span><span class="c1"></span>            <span class="kt">byte</span> <span class="o">[]</span> <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">1024</span><span class="o">];</span>
            <span class="kt">int</span> <span class="n">readlen</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
            <span class="n">fileInputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">srcPath</span><span class="o">);</span>
            <span class="n">fileOutputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">destPath</span><span class="o">);</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">readlen</span> <span class="o">=</span> <span class="n">fileInputStream</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buf</span><span class="o">))!=-</span><span class="n">1</span><span class="o">){</span>
                <span class="n">fileOutputStream</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buf</span><span class="o">,</span><span class="n">0</span><span class="o">,</span><span class="n">readlen</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;写入成功！&#34;</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="c1">//关闭输入输出流，释放资源
</span><span class="c1"></span>                <span class="k">if</span><span class="o">(</span><span class="n">fileInputStream</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
                    <span class="n">fileInputStream</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="o">}</span>
                <span class="k">if</span><span class="o">(</span><span class="n">fileOutputStream</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
                    <span class="n">fileOutputStream</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div><p><img src="/image/Java_IO_01/image11.png" alt="image11"  /></p>
<p>需要注意的是，写入文件时，必须使用</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="n">write</span><span class="o">(</span><span class="kt">byte</span><span class="o">[],</span><span class="n">0</span><span class="o">,</span><span class="n">readLength</span><span class="o">)</span>
</code></pre></div><p>写入。readLength为读入数据的长度，这样写可以避免byte数组过大时把其余子集读入造成文件损失</p>
</li>
</ul>
<h3 id="reader与writer的子类及使用">Reader与Writer的子类及使用</h3>
<ul>
<li>
<p>FileReader的相关方法：</p>
<ol>
<li>new FileReader(File/String)：创建对象</li>
<li>read()：每次读取单个字符并返回，如果到文件末尾，返回-1</li>
<li>read(char[])：批量读取多个字符到数组，返回读取到的字符数，如果到文件末尾则返回-1。</li>
</ol>
<p>相关API</p>
<ol>
<li>new String(char[])：将char[] 转换成String</li>
<li>new String(char[],off,len)：将char[]的指定部分转换成String</li>
</ol>
<p>代码演示</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.java_io</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.FileNotFoundException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.FileReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileReaderTest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">FileReaderTest</span><span class="o">(){</span>
        <span class="n">String</span> <span class="n">filePath</span> <span class="o">=</span> <span class="s">&#34;e:\\story.txt&#34;</span><span class="o">;</span>
        <span class="n">FileReader</span> <span class="n">fileReader</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="kt">char</span> <span class="o">[]</span> <span class="n">chars</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="n">1024</span><span class="o">];</span>
        <span class="k">try</span> <span class="o">{</span>
          <span class="c1">//新建对象
</span><span class="c1"></span>            <span class="n">fileReader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileReader</span><span class="o">(</span><span class="n">filePath</span><span class="o">);</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="k">while</span> <span class="o">((</span><span class="n">fileReader</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">chars</span><span class="o">))!=-</span><span class="n">1</span><span class="o">){</span>
                    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">chars</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="k">if</span><span class="o">(</span><span class="n">fileReader</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
                    <span class="c1">//关闭流，释放资源
</span><span class="c1"></span>                     <span class="n">fileReader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></li>
<li>
<p>FileWriter的相关方法</p>
<ol>
<li>new FileWriter(File/String)：覆盖模式，相当于流的指针在首端</li>
<li>new FileWriter(File/String,true)：追加模式，相当于流的指针在尾端</li>
<li>write(int)：写入单个字符</li>
<li>write(char[])：写入指定数组</li>
<li>write(char[],off,len)：写入指定数组的指定部分</li>
<li>write(String)：写入整个字符串</li>
<li>write(String,off,len)：写入字符串的指定部分</li>
</ol>
<p>相关API</p>
<ol>
<li>toCharArray：将String转换成char[];</li>
</ol>
<p>注意：</p>
<ul>
<li>
<p>FileWriter使用后，必须关闭(close)或刷新(flush),否则写入不到指定的文件</p>
</li>
<li>
<p>FileWriter的类图如下</p>
<p><img src="/image/Java_IO_01/image12.png" alt="image12"  /></p>
</li>
</ul>
<p>FileWriter的使用</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.java_io</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.FileWriter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.Writer</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileWriterTest</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">FileWriter</span><span class="o">(){</span>
        <span class="n">String</span> <span class="n">filePath</span> <span class="o">=</span> <span class="s">&#34;e:\\note.txt&#34;</span><span class="o">;</span>

        <span class="n">FileWriter</span> <span class="n">fileWriter</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">&#34;AD&#34;</span><span class="o">;</span>
        <span class="kt">char</span> <span class="o">[]</span> <span class="n">chars</span> <span class="o">={</span><span class="sc">&#39;a&#39;</span><span class="o">,</span><span class="sc">&#39;b&#39;</span><span class="o">,</span><span class="sc">&#39;c&#39;</span><span class="o">,</span><span class="sc">&#39;d&#39;</span><span class="o">};</span>
        <span class="kt">int</span> <span class="n">writerLen</span> <span class="o">=</span> <span class="n">3</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">fileWriter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileWriter</span><span class="o">(</span><span class="n">filePath</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
            <span class="n">fileWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="sc">&#39;H&#39;</span><span class="o">);</span>
            <span class="n">fileWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;\n&#34;</span><span class="o">);</span><span class="c1">//换行
</span><span class="c1"></span>            <span class="n">fileWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">str</span><span class="o">);</span>
            <span class="n">fileWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;\n&#34;</span><span class="o">);</span>
            <span class="n">fileWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">chars</span><span class="o">);</span>
            <span class="n">fileWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;\n&#34;</span><span class="o">);</span>
            <span class="n">fileWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">chars</span><span class="o">,</span><span class="n">0</span><span class="o">,</span><span class="n">writerLen</span><span class="o">);</span>
            <span class="n">fileWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;\n&#34;</span><span class="o">);</span>
            <span class="n">fileWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">str</span><span class="o">,</span><span class="n">0</span><span class="o">,</span><span class="n">1</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                    <span class="n">fileWriter</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div><p><img src="/image/Java_IO_01/image13.png" alt="image13"  /></p>
<ul>
<li>
<p>如果需要换行或者输入制表符则可以</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="n">fileWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;\n&#34;</span><span class="o">);</span><span class="c1">//换行
</span><span class="c1"></span><span class="n">fileWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;\t&#34;</span><span class="o">);</span><span class="c1">//制表符
</span></code></pre></div></li>
</ul>
</li>
</ul>
<h3 id="节点流和处理流">节点流和处理流</h3>
<ul>
<li>
<p>节点流可以从一个特定的数据源读写数据</p>
</li>
<li>
<p>处理流(包装流)是“连接”在已存在的流（节点流或处理流）之上，为程序提供更为强大的读写功能，如BufferedReader、BufferedWriter</p>
<p><img src="/image/Java_IO_01/image14.png" alt="image14"  /></p>
</li>
<li>
<p>分析BufferedReader处理流</p>
<p><img src="/image/Java_IO_01/image15.png" alt="image15"  /></p>
<p>查看BufferedReader的源码可以知道，BufferedReader中定义了一个Reader属性，即他可以封装任意一个节点流，所以使用BufferedReader去操作的时候，其可以访问各种不同的数据源。其功能更为强大</p>
<p>BufferedWriter同理。</p>
</li>
<li>
<p>节点流与处理流的区别和联系</p>
<ol>
<li>节点流是底层流/低级流，直接跟数据源相接。</li>
<li>处理流(包装流)包装节点流，既可以消除不同节点流的实现差异，也可以提供更方便的方法来完成输入输出</li>
<li>处理流(包装流)对节点流进行包装，使用了修饰器设计模式，不会直接与数据源相连</li>
</ol>
</li>
<li>
<p>模拟装饰者设计模式来理解处理流BufferedReader/BufferedWriter</p>
<p>创建Reader抽象类(Reader_)</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.decorator_pattern</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Reader_</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">readString</span><span class="o">(){</span>

    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">readFile</span><span class="o">(){</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>创建节点流子类FileReader_</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.decorator_pattern</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileReader_</span> <span class="kd">extends</span> <span class="n">Reader_</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">readFile</span><span class="o">(){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;readFile&#34;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>创建节点流子类StringReader_</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.decorator_pattern</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">StringReader_</span> <span class="kd">extends</span> <span class="n">Reader_</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">readString</span><span class="o">(){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;readString&#34;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>创建处理流BufferedReader_</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.decorator_pattern</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BufferedReader_</span> <span class="kd">extends</span> <span class="n">Reader_</span><span class="o">{</span>
    <span class="kd">private</span> <span class="n">Reader_</span> <span class="n">reader_</span><span class="o">;</span><span class="c1">//属性时Reader_类型
</span><span class="c1"></span>
    <span class="kd">public</span> <span class="nf">BufferedReader_</span><span class="o">(</span><span class="n">Reader_</span> <span class="n">reader_</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">reader_</span> <span class="o">=</span> <span class="n">reader_</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="c1">//封装方法
</span><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">readFile</span><span class="o">(){</span>
        <span class="n">reader_</span><span class="o">.</span><span class="na">readFile</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="c1">//装饰者模式的特性：增加新功能
</span><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">readStrings</span><span class="o">(</span><span class="kt">int</span> <span class="n">num</span><span class="o">){</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">reader_</span><span class="o">.</span><span class="na">readString</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>Test类</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.decorator_pattern</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//新建bufferedReader_对象，把FileReader_传进去，使方法可以对文件操作
</span><span class="c1"></span>        <span class="n">BufferedReader_</span> <span class="n">bufferedReader_1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader_</span><span class="o">(</span><span class="k">new</span> <span class="n">FileReader_</span><span class="o">());</span>
        <span class="n">bufferedReader_1</span><span class="o">.</span><span class="na">readFile</span><span class="o">();</span>
        <span class="c1">//必须是相应的对象的方法才会有用
</span><span class="c1"></span>        <span class="n">bufferedReader_1</span><span class="o">.</span><span class="na">readStrings</span><span class="o">(</span><span class="n">10</span><span class="o">);</span><span class="c1">//无效
</span><span class="c1"></span>        <span class="c1">//新建bufferedReader_对象，把StringReader_传进去，使方法可以对字符串操作
</span><span class="c1"></span>        <span class="n">BufferedReader_</span> <span class="n">bufferedReader_2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader_</span><span class="o">(</span><span class="k">new</span> <span class="n">StringReader_</span><span class="o">());</span>
        <span class="n">bufferedReader_2</span><span class="o">.</span><span class="na">readStrings</span><span class="o">(</span><span class="n">10</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>测试结果</p>
<p><img src="/image/Java_IO_01/image16.png" alt="image16"  /></p>
<p>通过上述设计模式可以让BufferedReader包装其他节点流，这样子就能提高对数据源操作的效率</p>
<p>可以使用统一的一个read方法来优化上述代码。如：</p>
<p>在Reader_抽象类中使用抽象方法read</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.decorator_pattern</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Reader_</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">read</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div><p>然后子类实现此方法即可</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.decorator_pattern</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileReader_</span> <span class="kd">extends</span> <span class="n">Reader_</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">read</span><span class="o">(){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;readFile&#34;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>此时，想要操作相应的数据则需要利用对象的动态绑定机制，绑定到对应的实现子类即可	。</p>
<p>所以Test中的</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">        <span class="c1">//多态性，因为bufferedReader_1是new了FileReader_对象，所以去找FileReader_对象
</span><span class="c1"></span>        <span class="n">bufferedReader_1</span><span class="o">.</span><span class="na">readStrings</span><span class="o">(</span><span class="n">10</span><span class="o">);</span>
</code></pre></div><p>能输出readFile。</p>
</li>
<li>
<p>处理流的功能</p>
<ul>
<li>性能的提高：主要以增加缓冲的方式来提高输入输出的效率</li>
<li>操作的便捷：处理流可能提供了一系列便捷的方法来一次输入输出大批量的数据，使用更加灵活方便</li>
</ul>
</li>
</ul>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/java/">Java</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>

    
</article>

    <aside class="related-contents--wrapper">
    
    
        <h2 class="section-title">Related contents</h2>
        <div class="related-contents">
            <div class="flex article-list--tile">
                
                    
<article class="">
    <a href="/p/polymorphic/">
        
        

        <div class="article-details">
            <h2 class="article-title">polymorphic</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/p/java_io%E6%B5%81_2/">
        
        

        <div class="article-details">
            <h2 class="article-title">Java_IO流_2</h2>
        </div>
    </a>
</article>
                
                    
<article class="has-image">
    <a href="/p/javaarray/">
        
        
            <div class="article-image">
                
                    <img src="/cover04.jpg" loading="lazy" data-key="" data-hash="/cover04.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">JavaArray</h2>
        </div>
    </a>
</article>
                
                    
<article class="has-image">
    <a href="/p/javamethod/">
        
        
            <div class="article-image">
                
                    <img src="/cover03.jpg" loading="lazy" data-key="" data-hash="/cover03.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">JavaMethod</h2>
        </div>
    </a>
</article>
                
                    
<article class="has-image">
    <a href="/p/java%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/">
        
        
            <div class="article-image">
                
                    <img src="/cover02.jpg" loading="lazy" data-key="" data-hash="/cover02.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Java流程控制</h2>
        </div>
    </a>
</article>
                
            </div>
        </div>
    
</aside>

     
     
        
    <script src="https://utteranc.es/client.js" 
        repo="minster77/hugoblogtalks"
        issue-term="pathname"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2021 MinsterBlog
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="2.4.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>

    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer="true"
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer="true"
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    
        <aside class="sidebar right-sidebar sticky">
            <section class="widget archives">
                <div class="widget-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



                </div>
                <h2 class="widget-title section-title">Table of contents</h2>
                
                <div class="widget--toc">
                    <nav id="TableOfContents">
  <ol>
    <li><a href="#java-io流1概念及节点流">Java IO流1（概念及节点流）</a>
      <ol>
        <li><a href="#文件">文件</a></li>
        <li><a href="#io流原理及流的分类">IO流原理及流的分类</a></li>
        <li><a href="#inputstream的子类及使用">InputStream的子类及使用</a></li>
        <li><a href="#outputstream的子类及使用">OutputStream的子类及使用</a></li>
        <li><a href="#利用fileinputstream及fileoutputstream进行文件copy">利用FileInputStream及FileOutputStream进行文件Copy</a></li>
        <li><a href="#reader与writer的子类及使用">Reader与Writer的子类及使用</a></li>
        <li><a href="#节点流和处理流">节点流和处理流</a></li>
      </ol>
    </li>
  </ol>
</nav>
                </div>
            </section>
        </aside>
    

        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                defer="false"
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
